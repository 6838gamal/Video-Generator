<!DOCTYPE html>
<html>
<head>
    <title>AI Video Generator</title>
</head>

<body style="text-align:center; font-family:sans-serif">

<h2>ğŸ¬ ØªÙˆÙ„ÙŠØ¯ ÙÙŠØ¯ÙŠÙˆ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h2>

<input id="prompt" style="width:300px" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª Ù‡Ù†Ø§">
<br><br>

<button onclick="generate()">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>

<br><br>

<div id="progress"></div>

<br>

<video id="video" width="500" controls style="display:none"></video>

<br>
<a id="download" style="display:none">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a>

<script>

async function generate(){

    let prompt = document.getElementById("prompt").value

    let res = await fetch("/generate?prompt=" + prompt, {method:"POST"})
    let data = await res.json()

    checkProgress(data.job_id)
}

async function checkProgress(job_id){

    let interval = setInterval(async () => {

        let res = await fetch("/progress/" + job_id)
        let data = await res.json()

        document.getElementById("progress").innerText =
            "Ø§Ù„ØªÙ‚Ø¯Ù…: " + data.progress + "%"

        if(data.progress === 100){

            clearInterval(interval)

            let videoUrl = "/video/" + data.video

            let video = document.getElementById("video")
            video.src = videoUrl
            video.style.display = "block"

            let dl = document.getElementById("download")
            dl.href = videoUrl
            dl.innerText = "ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"
            dl.style.display = "block"
        }

    }, 2000)
}

</script>

</body>
</html>
